<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perpustakaan Digital</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
    <div class="main-container">
        <!-- Header -->
        <div class="card header-card">
            <h1>Perpustakaan KING MU</h1>
            <div class="role-selector">
                <span>Peran:</span>
                <select id="userRole">
                    <option value="admin">Admin</option>
                    <option value="user">User</option>
                </select>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="card nav-card">
            <div class="nav-tab active" data-tab="daftar">Daftar Buku</div>
            <div class="nav-tab" data-tab="pinjam" id="tabPinjam" style="display: none;">Pinjam Buku</div>
            <div class="nav-tab" data-tab="kelola" id="tabKelola">Kelola Buku</div>
            <div class="nav-tab" data-tab="riwayat">Riwayat</div>
        </nav>

        <!-- Content Section -->
        <main class="card content-card">
            <!-- Daftar Buku View -->
            <div id="daftarBukuView">
                <div class="content-header">
                    <h2>Koleksi Buku</h2>
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Cari judul atau penulis..."
                            class="search-input">
                        <button class="search-btn" onclick="filterBooks()">Cari</button>
                    </div>
                </div>

                <div id="booksList" class="book-list">
                    <p class="loading">Memuat daftar buku...</p>
                </div>
            </div>

            <!-- Pinjam Buku View (Hidden by default) -->
            <div id="pinjamBukuView" style="display: none;">
                <h2>Peminjaman Buku</h2>

                <div class="form-container" style="margin-bottom: 30px;">
                    <h3>Pinjam Buku</h3>
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <select id="borrowBookId" class="search-input">
                            <option value="">Pilih Buku yang ingin dipinjam</option>
                        </select>
                        <div style="display: flex; gap: 8px;">
                            <input type="text" id="latitude" placeholder="Latitude" class="search-input"
                                value="-6.2088">
                            <input type="text" id="longitude" placeholder="Longitude" class="search-input"
                                value="106.8456">
                            <button class="search-btn" style="background: #888;" onclick="getLocation()">üìç
                                Lokasi</button>
                        </div>
                        <button class="search-btn" style="padding: 12px;" onclick="testBorrowBook()">Pinjam Buku
                            Sekarang</button>
                    </div>
                </div>
            </div>

            <!-- Kelola Buku View (Hidden by default) -->
            <div id="kelolaBukuView" style="display: none;">
                <div class="manage-grid">
                    <!-- Kolom Kiri: Form -->
                    <div class="form-container">
                        <h3 id="formTitle">Tambah Buku</h3>
                        <input type="hidden" id="editBookId">
                        <div style="display: flex; flex-direction: column; gap: 16px;">
                            <div style="display: flex; flex-direction: column; gap: 8px;">
                                <label>Judul</label>
                                <input type="text" id="bookTitle" placeholder="Masukkan judul buku"
                                    class="search-input">
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 8px;">
                                <label>Penulis</label>
                                <input type="text" id="bookAuthor" placeholder="Nama penulis" class="search-input">
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 8px;">
                                <label>Stok</label>
                                <input type="number" id="bookStock" placeholder="1" class="search-input">
                            </div>
                            <button class="search-btn" style="padding: 12px; margin-top: 10px;" id="btnSimpanBuku"
                                onclick="handleSaveBook()">Simpan</button>
                            <button class="search-btn" style="padding: 12px; background: #888; display: none;"
                                id="btnCancelEdit" onclick="cancelEdit()">Batal</button>
                        </div>
                    </div>

                    <!-- Kolom Kanan: Tabel -->
                    <div class="table-container">
                        <h3>Data Buku</h3>
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>JUDUL</th>
                                    <th>PENULIS</th>
                                    <th>STOK</th>
                                    <th>AKSI</th>
                                </tr>
                            </thead>
                            <tbody id="manageBooksTableBody">
                                <!-- Dinamis dari script.js -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Riwayat View (Hidden by default) -->
            <div id="riwayatView" style="display: none;">
                <h2>Riwayat Peminjaman</h2>
                <div id="borrowHistory" class="book-list">
                    <p style="text-align: center; color: #999; padding: 40px;">Data riwayat akan ditampilkan di sini.
                    </p>
                </div>
            </div>
        </main>
    </div>

    <script src="/script.js"></script>
</body>

</html>